gin框架使用的是定制版**httprouter**，其路由的原理时大量使用公共前缀的树结构，基本上是一个紧凑的**Trie tree**（或者只是**Radix Tree**）。具有公共前缀的节点也共享一个公共父节点



# 路由Radix树

基数树（**Radix Tree**）又称为**PAT**位树，是一种更节省空间的前缀树（**Trie Tree**）。对于基数树的每个节点，如果该节点是唯一的子树的话，就和父节点合并

由于**URL路径**具有层次结构，并且只使用有限的一组字符(字节值)，所以很可能有许多常见的前缀。这使我们可以很容易地将路由简化为更小的问题。此外，路由器为每个请求方法管理一棵单独的树。一方面，它比在每个节点中都保存一个**method-> handle map**更加节省空间，它还使我们甚至可以在开始在前缀树中查找之前大大减少路由问题。

为了获得更好的可伸缩性，每个树级别上的子节点都按**Priority(优先级) **排序，其中优先级(最左列)就是在子节点(子节点、子子节点等等)中注册的句柄的数量。这样做有两个好处:
1. 首先优先匹配被大多数路由路径包含的节点。这样可以让尽可能多的路由快速被定位。
2. 类似于成本补偿。最长的路径可以被优先匹配，补偿体现在最长的路径需要花费更长的时间来定位，如果最长路径的节点能被优先匹配(即每次拿子节点都命中)，那么路由匹配所花的时间不一定比短路径的路由长。下面展示了节点(每个`-`可以看做一个节点) 匹配的路径:从左到右，从上到下。

## 路由树节点

